-- Craet the main data base base on the original mammals species grid from the rewilding project:

	





-- Workflow to update/incorporate databases into european mammals 
	The steps are as follow:
 
 1. Create the shapefile with all the point incluiding the following columns:
	id, species, status, year_start, year_end, source (we leave this source empty)
	
	It is important to have the source so we can create the EventId base on the source to add it after
	
 2. we push the specie point table to out main database in SQL 

 3. Agregate the point data and adding the souce wiht the script insert_data.SQL this scrip: insert each of the specie into a one database, it aggregates each of specie in one file or databse
 
 4. We update the event data base, Insert and ot update the new source to the data base wiht the SQL code: update_dwc_events 
	( If we need only update the event ID, please Before running the update_fwc_script remember to run and trigger the funcion update_eventid_in_related_tables() 
	within the script eventID_trigger_function.SQL so all the tables related will automatically update)

	If we have a new event(source) we update first the excel table storage here "I:\biocon\Emmanuel_Oceguera\projects\Mammals_species_distribution_DarwingCore\data\in_process\europe\datasources_ungulates_full_biblio.xlsx"
	to obtain the eventID then we update the event data base in SQL: Here it wont update automatically the eventID to the related database since is not yet added to the main database which are:
	mammals_ungulates_dwc_occ (not spatial object) and mammals_ungulates_dwc_occ_sf (spatial object)
 
 5. We incorporate the occurrences point already aggregated into one file for all  the specie to the eea grid running the scrip 05_add_data_in_grid.R  with this script will pull the table 
	from the SQL data base and will add the data to a eea grid to the correponging country or Region. wi will end up with grid layer with the ocurrences combined, whether the species is present or not 
	or any another status it may have for instance extinct(5).
	
	Following this script the script will save each of the specie separatelly in the corresponding country folder for instance we have created some data set for thuringen 
	will ed up with two data set one for 'OVIMUS' and 'DAMDAM' the shp will save into the country folder as follow e.g M_TH_DAMDAM (M = Mammiferos, TH = Region, specieCode)
	
	In this spet will be set the event ID so if we have new eventID we need first to update the excel table and the event table in SQL so we are aling with that.  
		

 6. After saving the species to the corresponign country we need to check two thingf firstly that the species has an eventID that is related to the source in the event table
	and second that the specie is in the correspoding country as eea_grid
	
 7. To update the main databases, run the script 05_process_mammals_distribution_data_clean. This script automatically recreates the two primary datasets with any new updates. 
	It detects changes in the country folders and incorporates those additions directly into the main database, ensuring that the latest records are always included.
	
 
 8. As last step we will rasterize the each of the specie at the european level  following the script: 06_rasterize_data
 

	


	